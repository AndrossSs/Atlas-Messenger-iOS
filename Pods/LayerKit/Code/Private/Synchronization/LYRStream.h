//
//  LYRStream.h
//  LayerKit
//
//  Created by Klemen Verdnik on 28/04/14.
//  Copyright (c) 2014 Layer Inc. All rights reserved.
//

#import "messaging.h"

/**
 The `LYRStream` class is a subclass of autogenerated Thrift object `LYRTStream` found in `messaging.h`. This subclass decorates the superclass with `NSCopying`, `isEqual:` and `hash` implementations
 (useful if storing instances of them in an NSSet).
 @discussion Note, this object doesn't have it's own ID type of integer, since we're using its `databaseIdentifier` property as a primary key in SQLite.
 */
@interface LYRStream : LYRTStream

/**
 @abstract The immutable database identifier (primary key in the local persistence store).
 */
@property (nonatomic, readonly) LYRSequence databaseIdentifier;

/**
 @abstract Returns the underlying Thrift `stream_id` field as a `NSUUID` objects.
 */
@property (nonatomic, readonly) NSUUID *streamUUID;

+ (id)stream;
+ (id)streamWithMembers:(NSSet *)members;
+ (id)streamWithThriftStream:(LYRTStream *)stream;

/**
 @abstract Creates a new instance of `LYRStream` and copies the properties of `LYRTStream` into it.

 @param thriftStream The Thrift generated `LYRTStream` object instance.
 @return A new instance of `LYRStream` object (subclass of `LYRTStream`) with all properties coppied.
 */
- (id)initWithThriftStream:(LYRTStream *)thriftStream;

/**
 @abstract Creates a new instance of `LYRStream` and transforms a set of members with `NSUUID` instances into `NSData` instances.

 @param members A set of `NSUUID` instances.
 @return A new instance of `LYRStream` object (subclass of `LYRTStream`) with all properties coppied.
 */
- (id)initWithMembers:(NSSet *)members;

@end
