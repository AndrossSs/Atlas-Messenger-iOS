//
//  LYREvent.h
//  LayerKit
//
//  Created by Klemen Verdnik on 28/04/14.
//  Copyright (c) 2014 Layer Inc. All rights reserved.
//

#import "messaging.h"

/**
 The `LYREvent` class is a subclass of autogenerated Thrift object `LYRTEvent` found in `messaging.h`. This subclass decorates the superclass with NSCopying, isEqual and hashing implementation (usefull if storing instances of them in an NSSet).
 @discussion Note, this object doesn't have it's own ID type of integer, since we're using its `databaseIdentifier` property as a primary key in SQLite.
 */
@interface LYREvent : LYRTEvent <NSCopying>

/**
 @abstract The immutable database identifier (primary key in the local persistence store).
 */
@property (nonatomic, readonly) LYRSequence databaseIdentifier;

@property (nonatomic, readonly) NSUUID *streamUUID;

/**
 @abstract The immutable stream database identifier (foreign key for the `streamDatabaseIdentifier`).
 */
@property (nonatomic, readonly) LYRSequence streamDatabaseIdentifier;

@property (nonatomic, readonly) LYRSequence messageDatabaseIdentifier;

@property (nonatomic, strong) NSData *stream_id;

/**
 @abstract Initializes the new instance of `LYREvent`.

 @param databaseIdentifier Database identifier of `LYRStream`, which is a primary key in the data source.
 @param streamDatabaseIdentifier Foreign key of `LYRStream` databaseIdentifier
 @return An initialized instance of `LYREvent` object (subclass of `LYRTEvent`) with all properties coppied.
 */
- (id)initWithDatabaseIdentifier:(LYRSequence)databaseIdentifier streamDatabaseIdentifier:(LYRSequence)streamDatabaseIdentifier messageDatabaseIdentifier:(LYRSequence)messageDatabaseIdentifier;
+ (id)eventWithDatabaseIdentifier:(LYRSequence)databaseIdentifier streamDatabaseIdentifier:(LYRSequence)streamDatabaseIdentifier messageDatabaseIdentifier:(LYRSequence)messageDatabaseIdentifier;

/**
 @abstract Initializes the new instance of `LYREvent` and copies the properties from `LYRTEvent` into it.

 @param thriftEvent The Thrift generated `LYRTEvent` object instance.
 @return An initialized instance of `LYREvent` object (subclass of `LYRTEvent`) with all properties coppied.
 */
- (id)initWithThriftEvent:(LYRTEvent *)thriftEvent;
+ (id)eventWithThriftEvent:(LYRTEvent *)thriftEvent;

@end
